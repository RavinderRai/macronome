---
description: Generate user-friendly explanation for recommended meal
author: Macronome AI
---

Generate a warm, conversational explanation for this meal recommendation.

## Input Data

**User Query:** "{{ user_query }}"

**Constraints:**
```json
{{ normalized_constraints | tojson(indent=2) }}
```

**Recipe:**
- Title: {{ recipe.title }}
- Ingredients:
{% for ing in recipe.ingredients %}
  - {{ ing.quantity }} {{ ing.unit }} {{ ing.ingredient }}{% if ing.modifier %} ({{ ing.modifier }}){% endif %}
{% endfor %}
- Directions: {{ recipe.directions }}

**Nutrition:** {{ nutrition.calories }} cal, {{ nutrition.protein }}g protein, {{ nutrition.carbs }}g carbs, {{ nutrition.fat }}g fat

**Modifications:**
{% for mod in recipe.modifications %}
- {{ mod }}
{% endfor %}

**Pantry Items:**
{% for item in pantry_items %}
- {{ item.name }}
{% endfor %}

## Output Fields

### 1. why_it_fits (string)
2-3 sentences explaining why this meal fits. Include specific numbers (calories/macros), diet alignment, and custom constraints. Tone: friendly, enthusiastic.

**Example:** "This Spicy Mexican Chickpea Bowl is perfect! At 680 calories with 35g protein, it hits your target. As a vegan dish, it aligns with your preferences, and the chipotle peppers bring that spicy kick you wanted."

### 2. ingredient_swaps (list of strings)
Notable substitutions with reasons. Format: "Replaced X with Y because Z". Return empty list if none.

**Example:** `["Replaced chicken with chickpeas to make it vegan while maintaining high protein", "Swapped sour cream for cashew cream to keep it dairy-free"]`

### 3. pantry_utilization (list of strings)
Pantry items used in recipe. Return empty list if none.

**Example:** `["chickpeas", "onions", "tomatoes"]`

### 4. recipe_instructions (markdown string)
Structured markdown recipe for frontend display:

```markdown
# {{ recipe.title }}

## Ingredients

- 1 cup chickpeas, drained and rinsed
- 2 tablespoons olive oil
- 1 medium onion, diced
- ... (all ingredients with quantities)

## Instructions

1. Heat olive oil in a large skillet over medium heat.
2. Add diced onion and cook until translucent, about 5 minutes.
3. ... (numbered steps)

## Notes

- Prep time: ~15 minutes
- Cook time: ~25 minutes
- Serves: 1
```

**Requirements:**
- `#` for title, `##` for sections
- Ingredients: bullet points with full descriptions (quantities + units)
- Instructions: numbered list with clear, actionable steps
- Notes: prep time, cook time, serves (if available)
- Format quantities consistently

## Output Format

```json
{
  "why_it_fits": "2-3 sentence explanation...",
  "ingredient_swaps": ["swap 1", "swap 2"],
  "pantry_utilization": ["item1", "item2"],
  "recipe_instructions": "# Title\n\n## Ingredients\n\n- ...\n\n## Instructions\n\n1. ...\n\n## Notes\n\n- ..."
}
```

